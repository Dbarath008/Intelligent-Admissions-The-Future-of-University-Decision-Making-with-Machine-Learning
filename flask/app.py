{"cells":[{"cell_type":"code","execution_count":1,"metadata":{"executionInfo":{"elapsed":39,"status":"ok","timestamp":1681234636384,"user":{"displayName":"shanmuga sundaram","userId":"16076661414454688027"},"user_tz":-330},"id":"ZeoyKViKl-RV"},"outputs":[],"source":["import numpy as np\n","from flask import Flask, request, jsonify, render_template"]},{"cell_type":"code","execution_count":2,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":11895,"status":"ok","timestamp":1681234652461,"user":{"displayName":"shanmuga sundaram","userId":"16076661414454688027"},"user_tz":-330},"id":"7CJfs9FInMEo","outputId":"edf71d3f-5315-42bd-c121-eef29f4713d8"},"outputs":[{"output_type":"stream","name":"stdout","text":["Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Collecting pyngrok\n","  Downloading pyngrok-5.2.2.tar.gz (680 kB)\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m680.1/680.1 kB\u001b[0m \u001b[31m8.8 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25h  Preparing metadata (setup.py) ... \u001b[?25l\u001b[?25hdone\n","Requirement already satisfied: PyYAML in /usr/local/lib/python3.9/dist-packages (from pyngrok) (6.0)\n","Building wheels for collected packages: pyngrok\n","  Building wheel for pyngrok (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for pyngrok: filename=pyngrok-5.2.2-py3-none-any.whl size=19817 sha256=392992aa8430220039150c83487253fe5694ec1a035962b083ac896a129a0758\n","  Stored in directory: /root/.cache/pip/wheels/3c/bd/48/801313f1b6269333bfdaf91e63ec4a53c649948f209b8ef6ad\n","Successfully built pyngrok\n","Installing collected packages: pyngrok\n","Successfully installed pyngrok-5.2.2\n"]}],"source":["# install pyngrok\n","!pip install pyngrok\n","\n","# import ngrok\n","from pyngrok import ngrok"]},{"cell_type":"code","execution_count":3,"metadata":{"executionInfo":{"elapsed":4679,"status":"ok","timestamp":1681234662022,"user":{"displayName":"shanmuga sundaram","userId":"16076661414454688027"},"user_tz":-330},"id":"uHOncLpPm4lM"},"outputs":[],"source":["from tensorflow.keras.models import load_model"]},{"cell_type":"code","execution_count":4,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":35209,"status":"ok","timestamp":1681234705130,"user":{"displayName":"shanmuga sundaram","userId":"16076661414454688027"},"user_tz":-330},"id":"LJce60BrnSiM","outputId":"313c8cc3-f9a1-4096-af59-b7e46e105d60"},"outputs":[{"output_type":"stream","name":"stdout","text":["Mounted at /content/drive\n"]}],"source":["from google.colab import drive\n","drive.mount('/content/drive')\n","\n","%cp '/content/drive/My Drive/university_admission_prediction/training/model.h5' '/content/'\n","%cp -r '/content/drive/My Drive/university_admission_prediction/flask/templates' '/content/'"]},{"cell_type":"code","execution_count":5,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":1747,"status":"ok","timestamp":1681234712637,"user":{"displayName":"shanmuga sundaram","userId":"16076661414454688027"},"user_tz":-330},"id":"M4i32vEIm1M6","outputId":"a6ceeb05-2325-436a-8d3b-fbc01551a8e5"},"outputs":[{"output_type":"stream","name":"stdout","text":["URL :  NgrokTunnel: \"http://13e1-104-196-108-114.ngrok-free.app\" -> \"http://localhost:5000\"\n"]}],"source":["app = Flask(__name__)\n","\n","ngrok.set_auth_token(\"2NejXWwLPdVu3YU8rQUBjbIPzT5_6kpmTTTf41ZBxUDwtDtso\")\n","\n","public_url = ngrok.connect(5000)\n","print(\"URL : \", public_url)"]},{"cell_type":"code","execution_count":6,"metadata":{"executionInfo":{"elapsed":1632,"status":"ok","timestamp":1681234719430,"user":{"displayName":"shanmuga sundaram","userId":"16076661414454688027"},"user_tz":-330},"id":"MXNe8vZ7m7p5"},"outputs":[],"source":["model = load_model('model.h5')"]},{"cell_type":"code","execution_count":7,"metadata":{"id":"ne-QaXe6m_Qh","executionInfo":{"status":"ok","timestamp":1681234724471,"user_tz":-330,"elapsed":26,"user":{"displayName":"shanmuga sundaram","userId":"16076661414454688027"}}},"outputs":[],"source":["@app.route('/', methods=['GET', 'POST'])\n","def home():\n","    return render_template('home.html')"]},{"cell_type":"code","execution_count":8,"metadata":{"executionInfo":{"elapsed":22,"status":"ok","timestamp":1681234728123,"user":{"displayName":"shanmuga sundaram","userId":"16076661414454688027"},"user_tz":-330},"id":"9quuwSARnCgn"},"outputs":[],"source":["@app.route('/y_predict', methods=['POST'])\n","def y_predict():\n","\n","    min1 = [290.0, 92.0, 1.0, 1.0, 1.0, 6.8, 0.0]\n","    max1 = [340.0, 120.0, 5.0, 5.0, 5.0, 9.92, 1.0]\n","    k = [float(x) for x in request.form.values()]\n","    p = []\n","\n","    for i in range(7):\n","        l = (k[i]-min1[i]) / (max1[i]-min1[i])\n","        p.append(1)\n","\n","    prediction = model.predict([p])\n","    print(prediction)\n","    output = prediction[0]\n","\n","    if(output == False):\n","        return render_template('no_chance.html')\n","    else:\n","        return render_template('chance.html')"]},{"cell_type":"code","execution_count":9,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"gGA0ftBlnIba","executionInfo":{"status":"ok","timestamp":1681235840165,"user_tz":-330,"elapsed":1105141,"user":{"displayName":"shanmuga sundaram","userId":"16076661414454688027"}},"outputId":"466e0d4b-dc16-4318-aa91-bffdc2a794e4"},"outputs":[{"output_type":"stream","name":"stdout","text":[" * Serving Flask app '__main__'\n"," * Debug mode: off\n"]},{"output_type":"stream","name":"stderr","text":["INFO:werkzeug:\u001b[31m\u001b[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.\u001b[0m\n"," * Running on http://127.0.0.1:5000\n","INFO:werkzeug:\u001b[33mPress CTRL+C to quit\u001b[0m\n","INFO:werkzeug:127.0.0.1 - - [11/Apr/2023 17:39:11] \"GET / HTTP/1.1\" 200 -\n"]},{"output_type":"stream","name":"stdout","text":["1/1 [==============================] - 0s 258ms/step\n"]},{"output_type":"stream","name":"stderr","text":["INFO:werkzeug:127.0.0.1 - - [11/Apr/2023 17:45:23] \"POST /y_predict HTTP/1.1\" 200 -\n"]},{"output_type":"stream","name":"stdout","text":["[[2.044271]]\n","1/1 [==============================] - 0s 47ms/step\n"]},{"output_type":"stream","name":"stderr","text":["INFO:werkzeug:127.0.0.1 - - [11/Apr/2023 17:46:15] \"POST /y_predict HTTP/1.1\" 200 -\n"]},{"output_type":"stream","name":"stdout","text":["[[2.044271]]\n","1/1 [==============================] - 0s 63ms/step\n"]},{"output_type":"stream","name":"stderr","text":["INFO:werkzeug:127.0.0.1 - - [11/Apr/2023 17:50:25] \"POST /y_predict HTTP/1.1\" 200 -\n"]},{"output_type":"stream","name":"stdout","text":["[[2.044271]]\n","1/1 [==============================] - 0s 43ms/step\n"]},{"output_type":"stream","name":"stderr","text":["INFO:werkzeug:127.0.0.1 - - [11/Apr/2023 17:52:50] \"POST /y_predict HTTP/1.1\" 200 -\n"]},{"output_type":"stream","name":"stdout","text":["[[2.044271]]\n","1/1 [==============================] - 0s 58ms/step\n"]},{"output_type":"stream","name":"stderr","text":["INFO:werkzeug:127.0.0.1 - - [11/Apr/2023 17:52:57] \"POST /y_predict HTTP/1.1\" 200 -\n"]},{"output_type":"stream","name":"stdout","text":["[[2.044271]]\n","1/1 [==============================] - 0s 42ms/step\n"]},{"output_type":"stream","name":"stderr","text":["INFO:werkzeug:127.0.0.1 - - [11/Apr/2023 17:55:36] \"POST /y_predict HTTP/1.1\" 200 -\n"]},{"output_type":"stream","name":"stdout","text":["[[2.044271]]\n","1/1 [==============================] - 0s 49ms/step\n"]},{"output_type":"stream","name":"stderr","text":["INFO:werkzeug:127.0.0.1 - - [11/Apr/2023 17:56:07] \"POST /y_predict HTTP/1.1\" 200 -\n"]},{"output_type":"stream","name":"stdout","text":["[[2.044271]]\n"]}],"source":["app.run()"]}],"metadata":{"colab":{"provenance":[],"authorship_tag":"ABX9TyOeJ10CffCMW3eiFt+8ApKL"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}